import{d as j,o as R,c as o,a as t,m as E,p as N,t as s,n as g,k as v,F as f,r as k,g as m,q as V,u as z,j as l,b as L,_ as O}from"./index-DiX_Azey.js";import{l as H}from"./local-db.service-WB126Blj.js";const P={class:"container mx-auto px-4 py-6"},q={class:"mt-4"},G={class:"mt-6"},I={class:"card"},J={class:"card-body"},K={key:0,class:"flex justify-center items-center py-10"},Q={key:1,class:"text-red-600 dark:text-red-400 py-4"},U={key:2,class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},X={class:"text-xl font-bold text-gray-900 dark:text-white mt-1"},Y={class:"mt-1 flex items-center"},Z={class:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},tt={class:"ml-2 text-sm font-medium text-gray-900 dark:text-white"},et={class:"text-lg font-medium text-gray-900 dark:text-white mt-1"},at={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},st={class:"text-sm text-gray-600 dark:text-gray-400"},dt={class:"font-medium text-gray-900 dark:text-white"},nt={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md"},ot={class:"text-gray-600 dark:text-gray-400 mb-4"},lt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},it={class:"bg-white dark:bg-gray-700 p-3 rounded-md"},gt={class:"font-medium text-gray-900 dark:text-white"},mt={class:"bg-white dark:bg-gray-700 p-3 rounded-md"},ut={class:"font-medium text-gray-900 dark:text-white"},xt={class:"bg-white dark:bg-gray-700 p-3 rounded-md"},ct={class:"font-medium text-gray-900 dark:text-white"},yt={class:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pt={class:"flex justify-between mb-2"},vt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ft={class:"flex justify-between mb-2"},kt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},bt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},_t={class:"flex items-center justify-between"},wt={class:"font-medium text-gray-900 dark:text-white"},Mt={class:"text-sm text-gray-600 dark:text-gray-400"},Ct={class:"mt-2"},Ft={class:"text-sm font-medium text-gray-900 dark:text-white"},$t={class:"bg-white dark:bg-gray-700 rounded-md border border-gray-200 dark:border-gray-600 overflow-hidden"},St={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Dt={class:"bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-700"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Tt={class:"px-6 py-4 whitespace-nowrap"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},jt={class:"px-6 py-4 whitespace-nowrap"},Rt={key:3,class:"text-gray-600 dark:text-gray-400 py-4"},Et=j({__name:"SignalDetailView",setup(Nt){const c=m(!1),x=m(""),d=m(null),y=m([]),h=m([]),i=m(null),p=m([]),F=z();function b(a){return{trend:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",momentum:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",reversal:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}function $(a){return a>=80?"bg-green-500":a>=60?"bg-yellow-500":a>=40?"bg-orange-500":"bg-red-500"}function S(a){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(a))}function D(a){return{trend:`基于${a.asset}的长期价格走势分析，我们检测到明显的${a.strength>70?"强":"中"}趋势信号。价格在过去${Math.floor(Math.random()*30)+7}天内${Math.random()>.5?"持续上涨":"持续下跌"}，成交量${Math.random()>.5?"明显增加":"保持稳定"}，表明市场对该资产的${Math.random()>.5?"买入":"卖出"}兴趣${a.strength>70?"强烈":"适中"}。`,momentum:`动量分析显示${a.asset}当前处于${a.strength>70?"强劲":"中等"}动量状态。过去${Math.floor(Math.random()*14)+3}天的价格变化率${Math.random()>.5?"显著":"逐步"}${Math.random()>.5?"上升":"下降"}，相对强弱指标(RSI)位于${Math.floor(Math.random()*30)+50}水平，表明${Math.random()>.5?"超买":"超卖"}状态可能${Math.random()>.5?"即将出现":"已经形成"}。`,reversal:`反转信号分析显示${a.asset}可能即将出现${a.strength>70?"强烈":"中等"}反转。价格在${Math.floor(Math.random()*60)+30}天内形成了${Math.random()>.5?"双底":"双顶"}形态，同时MACD指标${Math.random()>.5?"金叉":"死叉"}，成交量${Math.random()>.5?"明显放大":"开始萎缩"}，这些都是${Math.random()>.5?"看涨":"看跌"}反转的重要信号。`}[a.type]||"信号分析数据不可用"}function B(a){return a.type==="trend"?Math.random()>.5?"上涨":"下跌":a.type==="momentum"?Math.random()>.5?"继续上涨":"继续下跌":a.type==="reversal"?Math.random()>.5?"反转上涨":"反转下跌":"未知"}function T(a){return a.strength>=80?a.type==="reversal"?"强烈建议关注":"强烈建议操作":a.strength>=60?"建议谨慎操作":"建议观望"}function _(){return[{name:"RSI (14)",value:(Math.random()*40+30).toFixed(1),trend:(Math.random()*10-5).toFixed(1)},{name:"MACD",value:(Math.random()*2-1).toFixed(3),trend:(Math.random()*15-7.5).toFixed(1)},{name:"布林带",value:(Math.random()*.1+.05).toFixed(3),trend:(Math.random()*20-10).toFixed(1)},{name:"MA (50)",value:(Math.random()*1e4+1e3).toFixed(2),trend:(Math.random()*8-4).toFixed(1)}].map(a=>({...a,trend:parseFloat(a.trend)}))}function w(){const a=Math.floor(Math.random()*50)+30;let e="中性";return a>=70?e="极度看涨":a>=55?e="看涨":a>=45?e="中性":a>=30?e="看跌":e="极度看跌",{score:a,label:e,volumeChange:(Math.random()*30-10).toFixed(1)}}function M(a){return[{symbol:"BTC",name:"Bitcoin",change:(Math.random()*10-3).toFixed(2),marketCap:"1.2T"},{symbol:"ETH",name:"Ethereum",change:(Math.random()*15-5).toFixed(2),marketCap:"450B"},{symbol:"SOL",name:"Solana",change:(Math.random()*20-8).toFixed(2),marketCap:"80B"},{symbol:"ADA",name:"Cardano",change:(Math.random()*12-4).toFixed(2),marketCap:"40B"},{symbol:"DOT",name:"Polkadot",change:(Math.random()*18-6).toFixed(2),marketCap:"30B"},{symbol:"DOGE",name:"Dogecoin",change:(Math.random()*25-10).toFixed(2),marketCap:"25B"}].filter(n=>n.symbol!==a).sort(()=>Math.random()-.5).slice(0,4).map(n=>({...n,change:parseFloat(n.change)}))}function C(){const a=["trend","momentum","reversal"],e=[],n=new Date;for(let r=1;r<=7;r++){const u=new Date(n);u.setDate(u.getDate()-r),e.push({date:u.toLocaleDateString("zh-CN"),type:a[Math.floor(Math.random()*a.length)],strength:Math.floor(Math.random()*40)+40,result:(Math.random()*15-5).toFixed(1)})}return e.map(r=>({...r,result:parseFloat(r.result)}))}async function A(){const a=F.params.id;c.value=!0,x.value="";try{const e=await H.getRecentSignals(50),n=e.find(r=>r.id===a);n?(d.value=n,y.value=M(n.asset),h.value=_(),i.value=w(),p.value=C()):e.length>0&&(d.value=e[0],y.value=M(e[0].asset),h.value=_(),i.value=w(),p.value=C())}catch(e){x.value="获取信号详情失败",console.error("Error loading signal detail:",e)}finally{c.value=!1}}return R(()=>{A()}),(a,e)=>{const n=V("router-link");return l(),o("div",P,[e[19]||(e[19]=t("h1",{class:"text-2xl font-bold text-primary dark:text-white"},"TrendMatrix",-1)),e[20]||(e[20]=t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"信号详细信息与分析",-1)),t("div",q,[E(n,{to:"/signals/history",class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500"},{default:N(()=>[...e[0]||(e[0]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),L(" 返回信号历史 ",-1)])]),_:1})]),t("div",G,[t("div",I,[e[18]||(e[18]=t("div",{class:"card-header"},[t("h3",{class:"font-medium text-gray-900 dark:text-white"},"信号信息")],-1)),t("div",J,[c.value?(l(),o("div",K,[...e[1]||(e[1]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"},null,-1)])])):x.value?(l(),o("div",Q,s(x.value),1)):d.value?(l(),o("div",U,[t("div",W,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"资产",-1)),t("h4",X,s(d.value.asset),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"信号类型",-1)),t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1",b(d.value.type)])},s(d.value.type),3)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"信号强度",-1)),t("div",Y,[t("div",Z,[t("div",{class:g(["h-2 rounded-full",$(d.value.strength)]),style:v({width:d.value.strength+"%"})},null,6)]),t("span",tt,s(d.value.strength)+"%",1)])]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"生成时间",-1)),t("h4",et,s(S(d.value.timestamp)),1)])]),t("div",null,[e[6]||(e[6]=t("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"技术指标分析",-1)),t("div",at,[t("div",rt,[(l(!0),o(f,null,k(h.value,r=>(l(),o("div",{key:r.name,class:"bg-white dark:bg-gray-700 p-3 rounded-md"},[t("p",st,s(r.name),1),t("p",dt,s(r.value),1),t("span",{class:g(["text-xs mt-1 inline-block",r.trend>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},s(r.trend>=0?"↑":"↓")+" "+s(Math.abs(r.trend))+"% ",3)]))),128))])])]),t("div",null,[e[10]||(e[10]=t("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"信号分析",-1)),t("div",nt,[t("p",ot,s(D(d.value)),1),t("div",lt,[t("div",it,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"预测方向",-1)),t("p",gt,s(B(d.value)),1)]),t("div",mt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"置信度",-1)),t("p",ut,s(d.value.strength)+"%",1)]),t("div",xt,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"建议操作",-1)),t("p",ct,s(T(d.value)),1)])])])]),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"市场情绪分析",-1)),t("div",yt,[t("div",ht,[t("div",null,[t("div",pt,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"市场情绪",-1)),t("span",{class:g(["text-sm font-medium",i.value.score>=50?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},s(i.value.label),3)]),t("div",vt,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:v({width:i.value.score+"%"})},null,4)])]),t("div",null,[t("div",ft,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"交易量变化",-1)),t("span",{class:g(["text-sm font-medium",i.value.volumeChange>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},s(i.value.volumeChange>=0?"+":"")+s(i.value.volumeChange)+"% ",3)]),t("div",kt,[t("div",{class:"bg-green-500 h-2 rounded-full",style:v({width:50+i.value.volumeChange+"%"})},null,4)])])])])]),t("div",null,[e[15]||(e[15]=t("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"相关资产",-1)),t("div",bt,[(l(!0),o(f,null,k(y.value,r=>(l(),o("div",{key:r.symbol,class:"bg-white dark:bg-gray-700 p-3 rounded-md border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow"},[t("div",_t,[t("div",null,[t("p",wt,s(r.symbol),1),t("p",Mt,s(r.name),1)]),t("span",{class:g(["text-sm font-medium",r.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},s(r.change>=0?"+":"")+s(r.change)+"% ",3)]),t("div",Ct,[e[14]||(e[14]=t("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"市值",-1)),t("p",Ft,s(r.marketCap),1)])]))),128))])]),t("div",null,[e[17]||(e[17]=t("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"历史信号",-1)),t("div",$t,[t("table",St,[e[16]||(e[16]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," 日期 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," 类型 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," 强度 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," 结果 ")])],-1)),t("tbody",Dt,[(l(!0),o(f,null,k(p.value,(r,u)=>(l(),o("tr",{key:u},[t("td",Bt,s(r.date),1),t("td",Tt,[t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",b(r.type)])},s(r.type),3)]),t("td",At,s(r.strength)+"% ",1),t("td",jt,[t("span",{class:g(["text-sm font-medium",r.result>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},s(r.result>=0?"+":"")+s(r.result)+"% ",3)])]))),128))])])])])])):(l(),o("div",Rt," 信号不存在或已被删除 "))])])])])}}}),Lt=O(Et,[["__scopeId","data-v-3495b909"]]);export{Lt as default};
//# sourceMappingURL=SignalDetailView-DKCq_foJ.js.map
