import{d as L,o as N,c as o,a as t,t as d,e as l,w as k,l as M,v as H,f as j,F,r as U,b as f,n as C,g as x,j as n,_ as O}from"./index-B7b9X0ib.js";const A={class:"container mx-auto px-4 py-8"},E={key:0,class:"mb-6 p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md"},K={key:1,class:"flex justify-center items-center py-16"},q={class:"mb-6 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},J={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},Q={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},W={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},X={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},tt={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},at={class:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400"},st={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},rt=["onClick"],dt={key:0,class:"px-6 py-12 text-center"},ot={key:1,class:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6"},nt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},lt={class:"text-sm text-gray-700 dark:text-gray-300"},it={class:"font-medium"},ut={class:"font-medium"},yt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},xt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full p-6"},gt={class:"flex justify-between items-center mb-6"},mt={key:0,class:"space-y-6"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pt={class:"space-y-2"},ft={class:"flex justify-between"},bt={class:"text-sm font-medium text-gray-900 dark:text-white"},vt={class:"flex justify-between"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},ht={class:"flex justify-between"},wt={class:"text-sm font-medium text-gray-900 dark:text-white"},_t={class:"flex justify-between"},Dt={class:"flex justify-between"},Mt={class:"text-sm font-medium text-gray-900 dark:text-white"},jt={key:0,class:"flex justify-between"},Ct={class:"text-sm font-medium text-gray-900 dark:text-white"},Pt={class:"space-y-2"},St={class:"flex justify-between"},Vt={class:"text-sm font-medium text-gray-900 dark:text-white"},zt={key:0,class:"flex justify-between"},Bt={class:"text-sm font-medium text-gray-900 dark:text-white"},$t={class:"flex justify-between"},It={class:"text-sm font-medium text-gray-900 dark:text-white"},Tt={class:"space-y-2"},Lt={class:"flex justify-between"},Nt={class:"text-sm font-medium text-gray-900 dark:text-white"},Ht={key:0,class:"flex justify-between"},Ft={class:"text-sm font-medium text-gray-900 dark:text-white"},Ut={class:"mt-6 flex justify-end"},Ot=L({__name:"PaymentHistoryView",setup(At){const b=x(!1),c=x(""),u=x([]),p=x(!1),r=x(null),i=x({start_date:"",end_date:"",status:"",limit:20,offset:0}),P=s=>s?new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"-",h=s=>s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",w=s=>{switch(s){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},_=s=>{switch(s){case"completed":return"已完成";case"pending":return"处理中";case"failed":return"失败";case"refunded":return"已退款";default:return"未知"}};function S(){const s=["completed","pending","failed","refunded"],e=[{type:"credit_card",brand:"Visa",last_four:"4242"},{type:"credit_card",brand:"Mastercard",last_four:"5555"},{type:"paypal",last_four:"paypal123"},{type:"crypto",last_four:"BTC1234"},{type:"bank_transfer",last_four:"BANK5678"}],a=[],y=new Date;for(let g=1;g<=15;g++){const m=new Date(y);m.setDate(m.getDate()-g*2);const D=s[Math.floor(Math.random()*s.length)],I=e[Math.floor(Math.random()*e.length)],T=Math.random()>.3;a.push({id:`payment_${g}`,transaction_id:`tx_${g}_${Math.floor(Math.random()*1e6)}`,amount:(Math.random()*1e3+10).toFixed(2),currency:"USD",status:D,payment_method:I,subscription_id:T?`sub_${Math.floor(Math.random()*1e3)}`:null,created_at:m.toISOString(),updated_at:D!=="completed"?new Date(m.getTime()+36e5).toISOString():m.toISOString()})}return a}async function v(s){b.value=!0,c.value="";try{let e=S();if(s){if(s.status&&(e=e.filter(a=>a.status===s.status)),s.start_date){const a=new Date(s.start_date);e=e.filter(y=>new Date(y.created_at)>=a)}if(s.end_date){const a=new Date(s.end_date);a.setHours(23,59,59,999),e=e.filter(y=>new Date(y.created_at)<=a)}s.limit&&(e=e.slice(s.offset,s.offset+s.limit))}u.value=e}catch(e){c.value="获取支付历史失败",console.error("Error loading payment history:",e)}finally{b.value=!1}}async function V(s){try{const e=u.value.find(a=>a.id===s);e&&(r.value=e,p.value=!0)}catch(e){console.error("获取支付详情失败:",e)}}const z=async()=>{await v(i.value)},B=async()=>{i.value={start_date:"",end_date:"",status:"",limit:20,offset:0},await v()},$=async s=>{await V(s)};return N(()=>{v()}),(s,e)=>(n(),o("div",A,[e[35]||(e[35]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-primary dark:text-white"},"TrendMatrix"),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"查看您的支付记录")],-1)),c.value?(n(),o("div",E,d(c.value),1)):l("",!0),b.value?(n(),o("div",K,[...e[5]||(e[5]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)])])):l("",!0),t("div",q,[t("div",G,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"开始日期",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>i.value.start_date=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[M,i.value.start_date]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"结束日期",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>i.value.end_date=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[M,i.value.end_date]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"支付状态",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.status=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[...e[8]||(e[8]=[j('<option value="" data-v-89830ebf>全部状态</option><option value="completed" data-v-89830ebf>已完成</option><option value="pending" data-v-89830ebf>处理中</option><option value="failed" data-v-89830ebf>失败</option><option value="refunded" data-v-89830ebf>已退款</option>',5)])],512),[[H,i.value.status]])])]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:z,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 应用筛选 "),t("button",{onClick:B,class:"ml-3 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 重置 ")])]),t("div",J,[t("div",Q,[t("table",R,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 支付 ID "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 日期 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 金额 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 状态 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 支付方式 "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 描述 "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 操作 ")])],-1)),t("tbody",W,[(n(!0),o(F,null,U(u.value,a=>(n(),o("tr",{key:a.id},[t("td",X,d(a.id),1),t("td",Y,d(P(a.created_at)),1),t("td",Z,d(a.amount)+" "+d(a.currency),1),t("td",tt,[t("span",{class:C(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",w(a.status)])},d(_(a.status)),3)]),t("td",et,d(a.payment_method.type==="credit_card"?`${a.payment_method.brand} 卡`:a.payment_method.type==="paypal"?"PayPal":a.payment_method.type==="crypto"?"加密货币":"银行转账"),1),t("td",at,d(a.subscription_id?"订阅支付":"其他支付"),1),t("td",st,[t("button",{onClick:y=>$(a.id),class:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 focus:outline-none"}," 查看详情 ",8,rt)])]))),128))])])]),u.value.length===0?(n(),o("div",dt,[...e[11]||(e[11]=[t("svg",{class:"h-16 w-16 text-gray-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})],-1),t("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"},"暂无支付记录",-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"您还没有任何支付记录",-1)])])):l("",!0),u.value.length>0?(n(),o("div",ot,[e[18]||(e[18]=t("div",{class:"flex-1 flex justify-between sm:hidden"},[t("a",{href:"#",class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}," 上一页 "),t("a",{href:"#",class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}," 下一页 ")],-1)),t("div",nt,[t("div",null,[t("p",lt,[e[12]||(e[12]=f(" 显示第 ",-1)),e[13]||(e[13]=t("span",{class:"font-medium"},"1",-1)),e[14]||(e[14]=f(" 到 ",-1)),t("span",it,d(u.value.length),1),e[15]||(e[15]=f(" 条，共 ",-1)),t("span",ut,d(u.value.length),1),e[16]||(e[16]=f(" 条记录 ",-1))])]),e[17]||(e[17]=j('<div data-v-89830ebf><nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination" data-v-89830ebf><a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600" data-v-89830ebf><span class="sr-only" data-v-89830ebf>上一页</span><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" data-v-89830ebf><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" data-v-89830ebf></path></svg></a><a href="#" aria-current="page" class="z-10 bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-600 dark:text-blue-400 relative inline-flex items-center px-4 py-2 border text-sm font-medium" data-v-89830ebf> 1 </a><a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600" data-v-89830ebf><span class="sr-only" data-v-89830ebf>下一页</span><svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" data-v-89830ebf><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" data-v-89830ebf></path></svg></a></nav></div>',1))])])):l("",!0)]),p.value?(n(),o("div",yt,[t("div",xt,[t("div",gt,[e[20]||(e[20]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"支付详情",-1)),t("button",{onClick:e[3]||(e[3]=a=>p.value=!1),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},[...e[19]||(e[19]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r.value?(n(),o("div",mt,[t("div",ct,[t("div",null,[e[27]||(e[27]=t("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"支付信息",-1)),t("div",pt,[t("div",ft,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"支付 ID",-1)),t("span",bt,d(r.value.id),1)]),t("div",vt,[e[22]||(e[22]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"交易 ID",-1)),t("span",kt,d(r.value.transaction_id),1)]),t("div",ht,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"金额",-1)),t("span",wt,d(r.value.amount)+" "+d(r.value.currency),1)]),t("div",_t,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"状态",-1)),t("span",{class:C(["text-sm font-medium px-2 py-1 rounded-full",w(r.value.status)])},d(_(r.value.status)),3)]),t("div",Dt,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"创建时间",-1)),t("span",Mt,d(h(r.value.created_at)),1)]),r.value.updated_at?(n(),o("div",jt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"更新时间",-1)),t("span",Ct,d(h(r.value.updated_at)),1)])):l("",!0)])]),t("div",null,[e[31]||(e[31]=t("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"支付方式",-1)),t("div",Pt,[t("div",St,[e[28]||(e[28]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"类型",-1)),t("span",Vt,d(r.value.payment_method.type==="credit_card"?"信用卡/借记卡":r.value.payment_method.type==="paypal"?"PayPal":r.value.payment_method.type==="crypto"?"加密货币":"银行转账"),1)]),r.value.payment_method.type==="credit_card"?(n(),o("div",zt,[e[29]||(e[29]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"品牌",-1)),t("span",Bt,d(r.value.payment_method.brand),1)])):l("",!0),t("div",$t,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"账号",-1)),t("span",It,d(r.value.payment_method.type==="credit_card"?`**** ${r.value.payment_method.last_four}`:r.value.payment_method.last_four),1)])])])]),t("div",null,[e[34]||(e[34]=t("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"其他信息",-1)),t("div",Tt,[t("div",Lt,[e[32]||(e[32]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"描述",-1)),t("span",Nt,d(r.value.subscription_id?"订阅支付":"其他支付"),1)]),r.value.subscription_id?(n(),o("div",Ht,[e[33]||(e[33]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"订阅 ID",-1)),t("span",Ft,d(r.value.subscription_id),1)])):l("",!0)])])])):l("",!0),t("div",Ut,[t("button",{onClick:e[4]||(e[4]=a=>p.value=!1),class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 关闭 ")])])])):l("",!0)]))}}),Kt=O(Ot,[["__scopeId","data-v-89830ebf"]]);export{Kt as default};
//# sourceMappingURL=PaymentHistoryView-Bc8e2X48.js.map
