import{d as at,o as rt,c as g,a as t,t as x,b as C,e as R,F as U,r as q,w as st,v as nt,f as ot,g as u,h as it,i as J,j as h,n as z,k as lt,_ as dt}from"./index-DiX_Azey.js";import{s as p,l as M,m as A,a as D,b as T,c as K}from"./transform-CG7McLW1.js";import{l as V}from"./local-db.service-WB126Blj.js";import{b as S}from"./band-Dr0Lhcb8.js";import{m as ct}from"./min-D1slsF82.js";import{m as O}from"./monotone-KI2q-aQs.js";const mt={class:"container mx-auto px-4 py-6"},xt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ut={class:"card"},gt={class:"card-body"},ht={class:"flex items-center justify-between"},pt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},vt={class:"card"},ft={class:"card-body"},yt={class:"flex items-center justify-between"},kt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},wt={class:"card"},bt={class:"card-body"},_t={class:"flex items-center justify-between"},jt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},Ct={class:"text-xs text-yellow-600 dark:text-yellow-400 mt-1 flex items-center"},Mt={class:"card"},Dt={class:"card-body"},Tt={class:"flex items-center justify-between"},St={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},$t={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},zt={class:"chart-container"},At={class:"chart-container"},Vt={class:"chart-container"},Bt={class:"chart-container"},Ht={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Lt={class:"card"},Wt={class:"overflow-x-auto"},Ft={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Pt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800"},Et={class:"px-4 py-3 whitespace-nowrap"},Nt={class:"text-sm font-medium text-gray-900 dark:text-white"},Xt={class:"px-4 py-3 whitespace-nowrap"},Gt={class:"px-4 py-3 whitespace-nowrap"},It={class:"flex items-center"},Rt={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Ut={class:"ml-2 text-xs text-gray-600 dark:text-gray-400"},qt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},Jt={class:"card"},Kt={class:"card-header flex items-center justify-between"},Ot={class:"flex items-center gap-2"},Qt={class:"p-4"},Yt={class:"flex items-center"},Zt={class:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center mr-3"},te={class:"text-sm font-medium text-gray-900 dark:text-white"},ee={class:"text-sm font-medium text-gray-900 dark:text-white"},ae={class:"text-xs text-gray-600 dark:text-gray-400"},re={class:"text-right"},se={class:"text-sm font-medium text-gray-900 dark:text-white"},ne={key:3,class:"flex flex-col items-center justify-center py-16"},oe=at({__name:"DashboardView",setup(ie){const f=u(null),y=u(null),k=u(null),w=u(null),B=J({all:!1}),H=J({data:""}),_=u(""),b=u(!1),L=u([]),$=u([]),v=u({total_signals:0,active_projects:0,market_sentiment:"中性",sentiment_score:50,solana_activity:0}),W=u([]),F=u([]),P=u([]),E=u([]),Q=it(()=>_.value?$.value.filter(r=>r.category===_.value):$.value);function Y(r){return{trend:"bg-secondary/20 text-secondary dark:bg-secondary/30 dark:text-secondary",momentum:"bg-accent/20 text-accent dark:bg-accent/30 dark:text-accent",reversal:"bg-primary/20 text-primary dark:bg-primary/30 dark:text-primary"}[r]||"bg-neutral/20 text-neutral dark:bg-neutral/30 dark:text-neutral"}function Z(r){return r>=80?"bg-secondary":r>=60?"bg-neutral":r>=40?"bg-accent":"bg-primary"}function tt(r){return new Intl.DateTimeFormat("zh-CN",{hour:"2-digit",minute:"2-digit"}).format(new Date(r))}function j(r,e){const a=[],s=new Date;for(let m=r-1;m>=0;m--){const c=new Date(s);c.setDate(c.getDate()-m);const n=`${c.getMonth()+1}月${c.getDate()}日`,d=e==="price"?100:e==="volume"?1e6:50,l=e==="price"?5:e==="volume"?5e5:20;a.push({date:n,signals:e==="signals"?Math.floor(d+Math.random()*l-l/2):0,activity:e==="activity"?Math.floor(50+Math.random()*50):0,price:e==="price"?parseFloat((d+Math.random()*l-l/2).toFixed(2)):0,volume:e==="volume"?Math.floor(d+Math.random()*l-l/2):0})}return a}async function et(){B.all=!0,H.data="";try{const[r,e,a]=await Promise.all([V.getDashboardMetrics(),V.getRecentSignals(5),V.getHotProjects(10)]);v.value=r,L.value=e,$.value=a,W.value=j(7,"signals"),F.value=j(7,"activity"),P.value=j(7,"price"),E.value=j(7,"volume"),b.value=!0,setTimeout(()=>{N(),X(),G(),I()},100)}catch(r){H.data="获取数据失败",console.error("Error loading data:",r)}finally{B.all=!1}}function N(){if(!f.value)return;p(f.value).selectAll("*").remove();const r=W.value,e=f.value.clientWidth,a=250,s={top:20,right:20,bottom:30,left:40},m=e-s.left-s.right,c=a-s.top-s.bottom,n=p(f.value).append("svg").attr("width",e).attr("height",a).append("g").attr("transform",`translate(${s.left},${s.top})`),d=S().domain(r.map(o=>o.date)).range([0,m]).padding(.1),l=M().domain([0,A(r,o=>o.signals)||100]).range([c,0]);n.append("g").attr("transform",`translate(0,${c})`).call(D(d)),n.append("g").call(T(l)),n.selectAll(".bar").data(r).enter().append("rect").attr("class","bar").attr("x",o=>d(o.date)||0).attr("y",o=>l(o.signals)).attr("width",d.bandwidth()).attr("height",o=>c-l(o.signals)).attr("fill","#93beb4"),n.append("text").attr("x",m/2).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#6b7280").text("每日信号数")}function X(){if(!y.value)return;p(y.value).selectAll("*").remove();const r=F.value,e=y.value.clientWidth,a=250,s={top:20,right:20,bottom:30,left:40},m=e-s.left-s.right,c=a-s.top-s.bottom,n=p(y.value).append("svg").attr("width",e).attr("height",a).append("g").attr("transform",`translate(${s.left},${s.top})`),d=S().domain(r.map(i=>i.date)).range([0,m]).padding(.1),l=M().domain([0,100]).range([c,0]);n.append("g").attr("transform",`translate(0,${c})`).call(D(d)),n.append("g").call(T(l));const o=K().x(i=>d(i.date)||0).y(i=>l(i.activity)).curve(O);n.append("path").datum(r).attr("fill","none").attr("stroke","#453b31").attr("stroke-width",2).attr("d",o),n.selectAll(".dot").data(r).enter().append("circle").attr("class","dot").attr("cx",i=>d(i.date)||0).attr("cy",i=>l(i.activity)).attr("r",4).attr("fill","#453b31"),n.append("text").attr("x",m/2).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#6b7280").text("项目活跃度")}function G(){if(!k.value)return;p(k.value).selectAll("*").remove();const r=P.value,e=k.value.clientWidth,a=250,s={top:20,right:20,bottom:30,left:40},m=e-s.left-s.right,c=a-s.top-s.bottom,n=p(k.value).append("svg").attr("width",e).attr("height",a).append("g").attr("transform",`translate(${s.left},${s.top})`),d=S().domain(r.map(i=>i.date)).range([0,m]).padding(.1),l=M().domain([ct(r,i=>i.price)||0,A(r,i=>i.price)||100]).range([c,0]);n.append("g").attr("transform",`translate(0,${c})`).call(D(d)),n.append("g").call(T(l));const o=K().x(i=>d(i.date)||0).y(i=>l(i.price)).curve(O);n.append("path").datum(r).attr("fill","none").attr("stroke","#f83a22").attr("stroke-width",2).attr("d",o),n.selectAll(".dot").data(r).enter().append("circle").attr("class","dot").attr("cx",i=>d(i.date)||0).attr("cy",i=>l(i.price)).attr("r",4).attr("fill","#f83a22"),n.append("text").attr("x",m/2).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#6b7280").text("价格趋势")}function I(){if(!w.value)return;p(w.value).selectAll("*").remove();const r=E.value,e=w.value.clientWidth,a=250,s={top:20,right:20,bottom:30,left:40},m=e-s.left-s.right,c=a-s.top-s.bottom,n=p(w.value).append("svg").attr("width",e).attr("height",a).append("g").attr("transform",`translate(${s.left},${s.top})`),d=S().domain(r.map(o=>o.date)).range([0,m]).padding(.1),l=M().domain([0,A(r,o=>o.volume)||1e6]).range([c,0]);n.append("g").attr("transform",`translate(0,${c})`).call(D(d)),n.append("g").call(T(l)),n.selectAll(".bar").data(r).enter().append("rect").attr("class","bar").attr("x",o=>d(o.date)||0).attr("y",o=>l(o.volume)).attr("width",d.bandwidth()).attr("height",o=>c-l(o.volume)).attr("fill","#b2937f"),n.append("text").attr("x",m/2).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#6b7280").text("交易量趋势")}return rt(()=>{et(),window.addEventListener("resize",()=>{b.value&&(N(),X(),G(),I())})}),(r,e)=>(h(),g("div",mt,[e[22]||(e[22]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-primary dark:text-white"},"TrendMatrix"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"数据概览和趋势分析")],-1)),b.value?(h(),g("div",xt,[t("div",ut,[t("div",gt,[t("div",ht,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"总信号数",-1)),t("h3",pt,x(v.value.total_signals.toLocaleString()),1),e[2]||(e[2]=t("p",{class:"text-xs text-green-600 dark:text-green-400 mt-1 flex items-center"},[t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})]),C(" 12.5% 较上周 ")],-1))]),e[3]||(e[3]=t("div",{class:"w-10 h-10 rounded-full bg-secondary/20 dark:bg-secondary/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-secondary dark:text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])])]),t("div",vt,[t("div",ft,[t("div",yt,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"活跃项目数",-1)),t("h3",kt,x(v.value.active_projects),1),e[5]||(e[5]=t("p",{class:"text-xs text-green-600 dark:text-green-400 mt-1 flex items-center"},[t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})]),C(" 8.2% 较上周 ")],-1))]),e[6]||(e[6]=t("div",{class:"w-10 h-10 rounded-full bg-accent/20 dark:bg-accent/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-accent dark:text-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))])])]),t("div",wt,[t("div",bt,[t("div",_t,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"市场情绪",-1)),t("h3",jt,x(v.value.market_sentiment),1),t("p",Ct,[e[7]||(e[7]=t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.77-1.964-.77-2.732 0L3.34 16c-.77.77-.77 1.964 0 2.732z"})],-1)),C(" "+x(v.value.sentiment_score)+"/100 ",1)])]),e[9]||(e[9]=t("div",{class:"w-10 h-10 rounded-full bg-primary/20 dark:bg-primary/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary dark:text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),t("div",Mt,[t("div",Dt,[t("div",Tt,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Solana 生态活跃度",-1)),t("h3",St,x(v.value.solana_activity)+"%",1),e[11]||(e[11]=t("p",{class:"text-xs text-green-600 dark:text-green-400 mt-1 flex items-center"},[t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})]),C(" 5.3% 较上周 ")],-1))]),e[12]||(e[12]=t("div",{class:"w-10 h-10 rounded-full bg-neutral/20 dark:bg-neutral/30 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-neutral dark:text-neutral",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])])])])):R("",!0),b.value?(h(),g("div",$t,[t("div",zt,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between mb-4"},[t("h3",{class:"text-lg font-medium text-primary dark:text-white"},"信号趋势")],-1)),t("div",{ref_key:"signalTrendChart",ref:f,class:"h-64"},null,512)]),t("div",At,[e[14]||(e[14]=t("div",{class:"flex items-center justify-between mb-4"},[t("h3",{class:"text-lg font-medium text-secondary dark:text-white"},"项目活跃度")],-1)),t("div",{ref_key:"projectActivityChart",ref:y,class:"h-64"},null,512)]),t("div",Vt,[e[15]||(e[15]=t("div",{class:"flex items-center justify-between mb-4"},[t("h3",{class:"text-lg font-medium text-accent dark:text-white"},"价格趋势")],-1)),t("div",{ref_key:"priceTrendChart",ref:k,class:"h-64"},null,512)]),t("div",Bt,[e[16]||(e[16]=t("div",{class:"flex items-center justify-between mb-4"},[t("h3",{class:"text-lg font-medium text-neutral dark:text-white"},"交易量趋势")],-1)),t("div",{ref_key:"volumeTrendChart",ref:w,class:"h-64"},null,512)])])):R("",!0),b.value?(h(),g("div",Ht,[t("div",Lt,[e[18]||(e[18]=t("div",{class:"card-header flex items-center justify-between"},[t("h3",{class:"font-medium text-primary dark:text-white"},"最近信号")],-1)),t("div",Wt,[t("table",Ft,[e[17]||(e[17]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"资产"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"类型"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"强度"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"时间")])],-1)),t("tbody",Pt,[(h(!0),g(U,null,q(L.value,a=>(h(),g("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",Et,[t("div",Nt,x(a.asset),1)]),t("td",Xt,[t("span",{class:z(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",Y(a.type)])},x(a.type),3)]),t("td",Gt,[t("div",It,[t("div",Rt,[t("div",{class:z(["h-2 rounded-full",Z(a.strength)]),style:lt({width:a.strength+"%"})},null,6)]),t("span",Ut,x(a.strength)+"%",1)])]),t("td",qt,x(tt(a.timestamp)),1)]))),128))])])])]),t("div",Jt,[t("div",Kt,[t("div",Ot,[e[20]||(e[20]=t("h3",{class:"font-medium text-secondary dark:text-white"},"热门项目",-1)),st(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),class:"border border-gray-300 dark:border-gray-700 rounded-md px-2 py-1 text-sm dark:bg-gray-800 dark:text-white"},[...e[19]||(e[19]=[ot('<option value="" data-v-8da542a9>全部类别</option><option value="Layer 1" data-v-8da542a9>Layer 1</option><option value="DEX" data-v-8da542a9>DEX</option><option value="AMM" data-v-8da542a9>AMM</option><option value="Staking" data-v-8da542a9>Staking</option><option value="GameFi" data-v-8da542a9>GameFi</option>',6)])],512),[[nt,_.value]])])]),t("div",Qt,[(h(!0),g(U,null,q(Q.value,a=>(h(),g("div",{key:a.id,class:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-0"},[t("div",Yt,[t("div",Zt,[t("span",te,x(a.name.charAt(0)),1)]),t("div",null,[t("h4",ee,x(a.name),1),t("p",ae,x(a.category),1)])]),t("div",re,[t("p",se,x(a.score)+"/100",1),t("p",{class:z(["text-xs",a.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},x(a.change>=0?"+":"")+x(a.change)+"% ",3)])]))),128))])])])):(h(),g("div",ne,[...e[21]||(e[21]=[t("svg",{class:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"点击上方按钮加载数据",-1),t("p",{class:"text-gray-600 dark:text-gray-400 text-center max-w-md"}," 为了优化性能，数据将在您点击后加载。这将显示最新的市场数据、信号趋势和项目活跃度。 ",-1)])]))]))}}),ge=dt(oe,[["__scopeId","data-v-8da542a9"]]);export{ge as default};
//# sourceMappingURL=DashboardView-hDpt02sW.js.map
