import{d as V,s as R,o as j,c as w,a as t,t as i,w as A,l as E,v as O,f as P,F as G,r as H,g as x,h as U,j as _,n as W,_ as I}from"./index-DsZW1VjG.js";import{s as d,l as L,m as S,a as M,b as z,c as q}from"./transform-CG7McLW1.js";import{l as F}from"./local-db.service-WB126Blj.js";import{b as $}from"./band-Dr0Lhcb8.js";const J={class:"container mx-auto px-4 py-6"},K={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},Q={class:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow"},X={class:"text-2xl font-bold text-gray-900 dark:text-white"},Y={class:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow"},Z={class:"text-2xl font-bold text-gray-900 dark:text-white"},tt={class:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow"},et={class:"text-2xl font-bold text-gray-900 dark:text-white"},at={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},rt={class:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow"},st={class:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow"},ot={class:"flex flex-col md:flex-row justify-between items-start md:items-center mt-6 gap-4"},lt={class:"relative"},nt={class:"relative"},dt={class:"mt-6 overflow-x-auto"},it={class:"min-w-full bg-white dark:bg-gray-800 rounded-lg overflow-hidden"},ct={class:"divide-y divide-gray-200 dark:divide-gray-700"},gt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm font-medium text-gray-900 dark:text-white"},xt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full"},ut={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm text-gray-900 dark:text-white"},mt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm text-gray-900 dark:text-white"},yt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm text-gray-900 dark:text-white"},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-900 dark:text-white"},Ct={class:"px-6 py-4 whitespace-nowrap"},At={class:"flex space-x-2"},Lt=["href"],St=["href"],Mt=V({__name:"SolanaNftView",setup(zt){const h=x({total_collections:0,total_volume_24h:0,average_floor_price:0,top_collections:[]}),f=x(""),u=x(""),k=x(!1),o=x([]),m=x(null),v=x(null),N=U(()=>h.value.top_collections.filter(r=>{const e=r.name.toLowerCase().includes(f.value.toLowerCase()),a=!u.value||r.category===u.value;return e&&a})),T=async()=>{k.value=!0;try{h.value=await F.getNftMarketMetrics(),await B()}catch(r){console.error("Error loading NFT data:",r)}finally{k.value=!1}},B=async()=>{try{console.log("Loading trend data for 7 days"),o.value=await F.getNftTrendData(7),console.log("Loaded trend data:",o.value.length,"days")}catch(r){console.error("Error loading NFT trend data:",r)}},b=()=>{if(!m.value||o.value.length===0)return;const r=m.value;d(r).selectAll("*").remove();const e=r.clientWidth,a=250,n={top:20,right:20,bottom:40,left:40},c=d(r).append("svg").attr("width",e).attr("height",a),g=$().domain(o.value.map(l=>l.date)).range([n.left,e-n.right]).padding(.2),p=L().domain([0,S(o.value,l=>l.volume)||1]).range([a-n.bottom,n.top]);c.append("g").attr("transform",`translate(0,${a-n.bottom})`).call(M(g)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").attr("font-size",o.value.length>14?"8px":"10px"),o.value.length>30?d(r).selectAll("g.tick").each(function(l,s){s%3!==0&&d(this).remove()}):o.value.length>14&&d(r).selectAll("g.tick").each(function(l,s){s%2!==0&&d(this).remove()}),c.append("g").attr("transform",`translate(${n.left},0)`).call(z(p).ticks(5).tickFormat(l=>`$${(l/1e6).toFixed(0)}M`)),c.selectAll(".bar").data(o.value).enter().append("rect").attr("class","bar").attr("x",l=>g(l.date)||0).attr("y",l=>p(l.volume)).attr("width",g.bandwidth()).attr("height",l=>a-n.bottom-p(l.volume)).attr("fill","#3b82f6")},C=()=>{if(!v.value||o.value.length===0)return;const r=v.value;d(r).selectAll("*").remove();const e=r.clientWidth,a=250,n={top:20,right:20,bottom:40,left:40},c=d(r).append("svg").attr("width",e).attr("height",a),g=$().domain(o.value.map(s=>s.date)).range([n.left,e-n.right]).padding(.2),p=L().domain([0,S(o.value,s=>s.floor_price)||1]).range([a-n.bottom,n.top]);c.append("g").attr("transform",`translate(0,${a-n.bottom})`).call(M(g)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").attr("font-size",o.value.length>14?"8px":"10px"),o.value.length>30?d(r).selectAll("g.tick").each(function(s,y){y%3!==0&&d(this).remove()}):o.value.length>14&&d(r).selectAll("g.tick").each(function(s,y){y%2!==0&&d(this).remove()}),c.append("g").attr("transform",`translate(${n.left},0)`).call(z(p).ticks(5).tickFormat(s=>`${s.toFixed(2)} SOL`));const l=q().x(s=>g(s.date)||0).y(s=>p(s.floor_price));c.append("path").datum(o.value).attr("fill","none").attr("stroke","#10b981").attr("stroke-width",2).attr("d",l),c.selectAll(".dot").data(o.value).enter().append("circle").attr("class","dot").attr("cx",s=>g(s.date)||0).attr("cy",s=>p(s.floor_price)).attr("r",4).attr("fill","#10b981")};R(o,()=>{setTimeout(()=>{b(),C()},100)},{deep:!0});const D=()=>{b(),C()};return j(()=>{T(),window.addEventListener("resize",D)}),(r,e)=>(_(),w("div",J,[e[13]||(e[13]=t("h1",{class:"text-2xl font-bold text-primary dark:text-white"},"TrendMatrix",-1)),e[14]||(e[14]=t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Solana NFT 市场趋势分析",-1)),t("div",null,[t("div",K,[t("div",Q,[e[2]||(e[2]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"总集合数",-1)),t("p",X,i(h.value.total_collections),1)]),t("div",Y,[e[3]||(e[3]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"24h 总交易量",-1)),t("p",Z,"$"+i(h.value.total_volume_24h.toLocaleString()),1)]),t("div",tt,[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"平均地板价",-1)),t("p",et,i(h.value.average_floor_price)+" SOL",1)])]),t("div",at,[t("div",rt,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"交易量趋势",-1)),t("div",{class:"h-64 mt-4",ref_key:"volumeChartRef",ref:m},null,512)]),t("div",st,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"地板价趋势",-1)),t("div",{class:"h-64 mt-4",ref_key:"floorPriceChartRef",ref:v},null,512)])]),t("div",ot,[t("div",lt,[A(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),placeholder:"搜索集合...",class:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"},null,512),[[E,f.value]]),e[7]||(e[7]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"16",height:"16"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",nt,[A(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),class:"pl-4 pr-10 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"},[...e[8]||(e[8]=[P('<option value="" data-v-0f221ecf>所有类别</option><option value="Avatar" data-v-0f221ecf>头像</option><option value="GameFi" data-v-0f221ecf>GameFi</option><option value="Art" data-v-0f221ecf>艺术</option><option value="Metaverse" data-v-0f221ecf>元宇宙</option>',5)])],512),[[O,u.value]]),e[9]||(e[9]=t("svg",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"16",height:"16"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),t("div",dt,[t("table",it,[e[12]||(e[12]=t("thead",{class:"bg-gray-100 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"集合名称"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"类别"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"地板价"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"24h 交易量"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"7d 交易量"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"24h 变化"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"持有者数"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"链接")])],-1)),t("tbody",ct,[(_(!0),w(G,null,H(N.value,a=>(_(),w("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",gt,[t("div",pt,i(a.name),1)]),t("td",xt,[t("span",ht,i(a.category),1)]),t("td",ut,[t("div",ft,i(a.floor_price)+" SOL",1)]),t("td",mt,[t("div",vt,"$"+i(a.volume_24h.toLocaleString()),1)]),t("td",yt,[t("div",wt,"$"+i(a.volume_7d.toLocaleString()),1)]),t("td",_t,[t("span",{class:W(a.change_24h>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},i(a.change_24h>=0?"+":"")+i(a.change_24h)+"% ",3)]),t("td",kt,[t("div",bt,i(a.holders.toLocaleString()),1)]),t("td",Ct,[t("div",At,[t("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",class:"text-blue-500 hover:text-blue-700"},[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.56-.5-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.56.5.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.498-.623.737-1.182.39-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 14.97 6.118 13.546 6.03 12H4.083a6.004 6.004 0 002.783 4.118z","clip-rule":"evenodd"})],-1)])],8,Lt),t("a",{href:a.twitter,target:"_blank",rel:"noopener noreferrer",class:"text-blue-400 hover:text-blue-500"},[...e[11]||(e[11]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})],-1)])],8,St)])])]))),128))])])])])]))}}),Bt=I(Mt,[["__scopeId","data-v-0f221ecf"]]);export{Bt as default};
//# sourceMappingURL=SolanaNftView-Be7wNisv.js.map
