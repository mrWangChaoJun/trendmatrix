import{d as C,o as M,c as g,a as e,w as f,l as T,v as D,t as o,F as V,r as z,g as l,h as b,j as x,n as h,k as L,m as N,p as j,q as B,b as F,_ as $}from"./index-DsZW1VjG.js";import{l as q}from"./local-db.service-WB126Blj.js";const E={class:"container mx-auto px-4 py-6"},H={class:"mt-4 flex flex-col md:flex-row gap-4"},I={class:"flex-1"},U={class:"flex gap-2"},P={class:"mt-6"},Q={class:"card"},R={class:"card-header flex items-center justify-between"},A={class:"text-sm text-gray-600 dark:text-gray-400"},G={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800"},O={class:"px-4 py-3 whitespace-nowrap"},W={class:"text-sm font-medium text-gray-900 dark:text-white"},X={class:"px-4 py-3 whitespace-nowrap"},Y={class:"px-4 py-3 whitespace-nowrap"},Z={class:"flex items-center"},ee={class:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},te={class:"ml-2 text-xs text-gray-600 dark:text-gray-400"},ae={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},re={class:"px-4 py-3 whitespace-nowrap text-sm font-medium"},se={class:"card-footer flex items-center justify-between px-4 py-3"},oe={class:"text-sm text-gray-600 dark:text-gray-400"},le={class:"flex space-x-2"},de=["disabled"],ne=["disabled"],ie=C({__name:"SignalHistoryView",setup(ue){const p=l(!1),y=l(""),m=l([]),u=l(""),c=l("all"),s=l(1),d=l(10),n=b(()=>{let a=[...m.value];if(u.value){const t=u.value.toLowerCase();a=a.filter(i=>i.asset.toLowerCase().includes(t))}return c.value!=="all"&&(a=a.filter(t=>t.type===c.value)),a.sort((t,i)=>new Date(i.timestamp).getTime()-new Date(t.timestamp).getTime()),a}),k=b(()=>{const a=(s.value-1)*d.value,t=a+d.value;return n.value.slice(a,t)});function w(a){return{trend:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",momentum:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",reversal:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}function _(a){return a>=80?"bg-green-500":a>=60?"bg-yellow-500":a>=40?"bg-orange-500":"bg-red-500"}function S(a){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(a))}async function v(){p.value=!0,y.value="";try{const a=await q.getRecentSignals(50);m.value=a,s.value=1}catch(a){y.value="获取信号数据失败",console.error("Error loading signals:",a)}finally{p.value=!1}}return M(()=>{v()}),(a,t)=>{const i=B("router-link");return x(),g("div",E,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold text-primary dark:text-white"},"TrendMatrix",-1)),t[9]||(t[9]=e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"历史信号记录",-1)),e("div",H,[e("div",I,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),type:"text",placeholder:"搜索信号...",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"},null,512),[[T,u.value]])]),e("div",U,[f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r),class:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"},[...t[4]||(t[4]=[e("option",{value:"all"},"所有类型",-1),e("option",{value:"trend"},"趋势",-1),e("option",{value:"momentum"},"动量",-1),e("option",{value:"reversal"},"反转",-1)])],512),[[D,c.value]]),e("button",{onClick:v,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," 刷新 ")])]),e("div",P,[e("div",Q,[e("div",R,[t[5]||(t[5]=e("h3",{class:"font-medium text-gray-900 dark:text-white"},"历史信号",-1)),e("span",A,o(n.value.length)+" 个信号",1)]),e("div",G,[e("table",J,[t[7]||(t[7]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"资产"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"类型"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"强度"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"时间"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"操作")])],-1)),e("tbody",K,[(x(!0),g(V,null,z(k.value,r=>(x(),g("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",O,[e("div",W,o(r.asset),1)]),e("td",X,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",w(r.type)])},o(r.type),3)]),e("td",Y,[e("div",Z,[e("div",ee,[e("div",{class:h(["h-2 rounded-full",_(r.strength)]),style:L({width:r.strength+"%"})},null,6)]),e("span",te,o(r.strength)+"%",1)])]),e("td",ae,o(S(r.timestamp)),1),e("td",re,[N(i,{to:`/signals/${r.id}`,class:"text-blue-600 dark:text-blue-400 hover:underline"},{default:j(()=>[...t[6]||(t[6]=[F("查看详情",-1)])]),_:1},8,["to"])])]))),128))])])]),e("div",se,[e("div",oe," 显示 "+o((s.value-1)*d.value+1)+" 到 "+o(Math.min(s.value*d.value,n.value.length))+" 共 "+o(n.value.length)+" 个信号 ",1),e("div",le,[e("button",{onClick:t[2]||(t[2]=r=>s.value=Math.max(1,s.value-1)),disabled:s.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-700 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"}," 上一页 ",8,de),e("button",{onClick:t[3]||(t[3]=r=>s.value=Math.min(Math.ceil(n.value.length/d.value),s.value+1)),disabled:s.value===Math.ceil(n.value.length/d.value),class:"px-3 py-1 border border-gray-300 dark:border-gray-700 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"}," 下一页 ",8,ne)])])])])])}}}),xe=$(ie,[["__scopeId","data-v-dc6a9de8"]]);export{xe as default};
//# sourceMappingURL=SignalHistoryView-DBd0t7Gk.js.map
