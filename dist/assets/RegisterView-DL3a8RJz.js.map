{"version":3,"file":"RegisterView-DL3a8RJz.js","sources":["../../src/frontend/src/views/auth/RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n    <div class=\"w-full max-w-md\">\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8\">\n        <div class=\"text-center mb-6\">\n          <h1 class=\"text-2xl font-bold text-primary dark:text-white\">TrendMatrix</h1>\n          <p class=\"text-gray-600 dark:text-gray-400 mt-1\">创建新账户</p>\n        </div>\n\n        <!-- 错误提示 -->\n        <div v-if=\"authStore.error\" class=\"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md\">\n          {{ authStore.error }}\n        </div>\n\n        <!-- 自定义错误提示 -->\n        <div v-if=\"passwordMismatch\" class=\"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md\">\n          两次输入的密码不一致\n        </div>\n\n        <form @submit.prevent=\"handleRegister\" class=\"space-y-4\">\n          <div class=\"form-group\">\n            <label for=\"name\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">用户名</label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              v-model=\"form.username\"\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n              placeholder=\"请输入用户名\"\n              required\n            >\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"email\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">邮箱</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              v-model=\"form.email\"\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n              placeholder=\"请输入邮箱地址\"\n              required\n            >\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"password\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">密码</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              v-model=\"form.password\"\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n              placeholder=\"请输入密码\"\n              required\n              minlength=\"6\"\n            >\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"confirmPassword\" class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">确认密码</label>\n            <input\n              type=\"password\"\n              id=\"confirmPassword\"\n              v-model=\"form.confirmPassword\"\n              class=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n              placeholder=\"请再次输入密码\"\n              required\n              minlength=\"6\"\n            >\n          </div>\n\n          <div class=\"flex items-center\">\n            <input\n              type=\"checkbox\"\n              id=\"terms\"\n              v-model=\"form.terms\"\n              class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600\"\n              required\n            >\n            <label for=\"terms\" class=\"ml-2 block text-sm text-gray-900 dark:text-gray-300\">\n              我同意 <a href=\"#\" class=\"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">服务条款</a> 和 <a href=\"#\" class=\"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">隐私政策</a>\n            </label>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              :disabled=\"authStore.loading\"\n              class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <span v-if=\"authStore.loading\" class=\"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full\"></span>\n              {{ authStore.loading ? '注册中...' : '注册' }}\n            </button>\n          </div>\n\n          <div class=\"text-center mt-4\">\n            <p class=\"text-sm text-gray-600 dark:text-gray-400\">\n              已有账户? <router-link to=\"/auth/login\" class=\"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">登录</router-link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '../../stores/auth.store';\n\nconst router = useRouter();\nconst authStore = useAuthStore();\n\nconst form = ref({\n  username: '',\n  email: '',\n  password: '',\n  confirmPassword: '',\n  terms: false\n});\n\nconst passwordMismatch = computed(() => {\n  return form.value.password && form.value.confirmPassword && form.value.password !== form.value.confirmPassword;\n});\n\nconst handleRegister = async () => {\n  // 重置错误\n  authStore.clearError();\n\n  // 验证密码是否匹配\n  if (passwordMismatch.value) {\n    return;\n  }\n\n  try {\n    await authStore.register(form.value.username, form.value.email, form.value.password);\n    // 注册成功后重定向到仪表盘\n    router.push('/');\n  } catch (error) {\n    // 错误已经在 store 中处理\n    console.error('注册失败:', error);\n  }\n};\n</script>\n\n<style scoped>\n/* 组件特定样式 */\n</style>\n"],"names":["router","useRouter","authStore","useAuthStore","form","ref","passwordMismatch","computed","handleRegister","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_unref","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_cache","$event","_vModelText","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_vModelCheckbox","_hoisted_12","_hoisted_13","_hoisted_14","_createVNode","_component_router_link"],"mappings":"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"}