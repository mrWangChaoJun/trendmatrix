{"version":3,"file":"local-db.service-WB126Blj.js","sources":["../../src/frontend/src/services/db/local-db.service.ts"],"sourcesContent":["// 数据模型接口\nexport interface Signal {\n  id: string;\n  asset: string;\n  type: string;\n  strength: number;\n  timestamp: string;\n}\n\nexport interface Project {\n  id: string;\n  name: string;\n  category: string;\n  score: number;\n  change: number;\n}\n\nexport interface DashboardMetrics {\n  total_signals: number;\n  active_projects: number;\n  market_sentiment: string;\n  sentiment_score: number;\n  solana_activity: number;\n}\n\nexport interface ChartData {\n  date: string;\n  signals: number;\n  activity: number;\n}\n\nexport interface SubscriptionPlan {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  currency: string;\n  billing_cycle: string;\n  features: string[];\n  api_rate_limit: number;\n  signal_limit: number;\n}\n\nexport interface Subscription {\n  id: string;\n  user_id: string;\n  plan_id: string;\n  plan: SubscriptionPlan;\n  status: string;\n  start_date: string;\n  end_date: string;\n  auto_renew: boolean;\n  current_usage: {\n    api_calls: number;\n    signals_generated: number;\n  };\n}\n\nexport interface DefiProtocol {\n  id: string;\n  name: string;\n  category: string;\n  tvl: number;\n  volume_24h: number;\n  change_24h: number;\n  users: number;\n  url: string;\n  twitter: string;\n  github: string;\n}\n\nexport interface NftCollection {\n  id: string;\n  name: string;\n  category: string;\n  floor_price: number;\n  volume_24h: number;\n  volume_7d: number;\n  change_24h: number;\n  holders: number;\n  url: string;\n  twitter: string;\n}\n\nexport interface NftMarketMetrics {\n  total_collections: number;\n  total_volume_24h: number;\n  average_floor_price: number;\n  top_collections: NftCollection[];\n}\n\nexport interface NftTrendData {\n  date: string;\n  volume: number;\n  floor_price: number;\n}\n\nclass LocalDbService {\n  /**\n   * 获取仪表盘指标\n   */\n  async getDashboardMetrics(): Promise<DashboardMetrics> {\n    // 直接返回测试数据\n    return {\n      total_signals: 1250,\n      active_projects: 42,\n      market_sentiment: '看涨',\n      sentiment_score: 78,\n      solana_activity: 85\n    };\n  }\n\n  /**\n   * 获取最近的信号\n   */\n  async getRecentSignals(limit: number = 5): Promise<Signal[]> {\n    // 直接返回测试数据\n    return [\n      { id: '1', asset: 'BTC', type: 'trend', strength: 85, timestamp: new Date().toISOString() },\n      { id: '2', asset: 'ETH', type: 'momentum', strength: 72, timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString() },\n      { id: '3', asset: 'SOL', type: 'reversal', strength: 65, timestamp: new Date(Date.now() - 1000 * 60 * 60).toISOString() },\n      { id: '4', asset: 'ADA', type: 'trend', strength: 90, timestamp: new Date(Date.now() - 1000 * 60 * 90).toISOString() },\n      { id: '5', asset: 'DOT', type: 'momentum', strength: 78, timestamp: new Date(Date.now() - 1000 * 60 * 120).toISOString() }\n    ].slice(0, limit);\n  }\n\n  /**\n   * 获取热门项目\n   */\n  async getHotProjects(limit: number = 5): Promise<Project[]> {\n    // 直接返回测试数据\n    return [\n      { id: '1', name: 'Solana', category: 'Layer 1', score: 92, change: 8.5 },\n      { id: '2', name: 'Serum', category: 'DEX', score: 88, change: 5.2 },\n      { id: '3', name: 'Raydium', category: 'AMM', score: 85, change: 3.7 },\n      { id: '4', name: 'Marinade Finance', category: 'Staking', score: 82, change: 2.1 },\n      { id: '5', name: 'Star Atlas', category: 'GameFi', score: 79, change: 10.3 }\n    ].slice(0, limit);\n  }\n\n  /**\n   * 获取信号趋势数据\n   */\n  async getSignalTrendData(days: number = 7): Promise<ChartData[]> {\n    // 生成并返回测试数据\n    return this.generateTestChartData(days, 'signals');\n  }\n\n  /**\n   * 获取项目活跃度数据\n   */\n  async getProjectActivityData(days: number = 7): Promise<ChartData[]> {\n    // 生成并返回测试数据\n    return this.generateTestChartData(days, 'activity');\n  }\n\n  /**\n   * 获取订阅计划\n   */\n  async getSubscriptionPlans(): Promise<SubscriptionPlan[]> {\n    // 直接返回测试数据\n    return [\n      {\n        id: '1',\n        name: 'Free',\n        description: '免费计划，适合新手用户',\n        price: 0,\n        currency: 'USD',\n        billing_cycle: 'monthly',\n        features: ['基本信号', '每日限额10次API调用', '邮件通知'],\n        api_rate_limit: 10,\n        signal_limit: 5\n      },\n      {\n        id: '2',\n        name: 'Pro',\n        description: '专业计划，适合活跃交易者',\n        price: 49.99,\n        currency: 'USD',\n        billing_cycle: 'monthly',\n        features: ['所有信号类型', '无限API调用', '实时通知', '高级分析'],\n        api_rate_limit: 1000,\n        signal_limit: 100\n      },\n      {\n        id: '3',\n        name: 'Enterprise',\n        description: '企业计划，适合机构用户',\n        price: 299.99,\n        currency: 'USD',\n        billing_cycle: 'monthly',\n        features: ['所有功能', '无限API调用', '专属支持', '自定义集成'],\n        api_rate_limit: 10000,\n        signal_limit: 1000\n      }\n    ];\n  }\n\n  /**\n   * 获取用户订阅\n   */\n  async getUserSubscriptions(): Promise<Subscription[]> {\n    // 直接返回测试数据\n    const plans = await this.getSubscriptionPlans();\n    return [\n      {\n        id: '1',\n        user_id: 'user123',\n        plan_id: '2',\n        plan: plans.find(p => p.id === '2') || plans[0],\n        status: 'active',\n        start_date: new Date(Date.now() - 1000 * 60 * 60 * 24 * 15).toISOString(),\n        end_date: new Date(Date.now() + 1000 * 60 * 60 * 24 * 15).toISOString(),\n        auto_renew: true,\n        current_usage: {\n          api_calls: 250,\n          signals_generated: 45\n        }\n      }\n    ];\n  }\n\n  /**\n   * 生成测试图表数据\n   */\n  private generateTestChartData(days: number, type: 'signals' | 'activity'): ChartData[] {\n    const data: ChartData[] = [];\n    const today = new Date();\n\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(today);\n      date.setDate(date.getDate() - i);\n\n      const dateStr = `${date.getMonth() + 1}月${date.getDate()}日`;\n\n      if (type === 'signals') {\n        data.push({\n          date: dateStr,\n          signals: Math.floor(Math.random() * 50) + 50,\n          activity: 0\n        });\n      } else {\n        data.push({\n          date: dateStr,\n          signals: 0,\n          activity: Math.floor(Math.random() * 30) + 60\n        });\n      }\n    }\n\n    return data;\n  }\n\n  /**\n   * 获取 DeFi 协议列表\n   */\n  async getDefiProtocols(): Promise<DefiProtocol[]> {\n    // 直接返回测试数据\n    return [\n      {\n        id: '1',\n        name: 'Raydium',\n        category: 'AMM',\n        tvl: 450000000,\n        volume_24h: 120000000,\n        change_24h: 5.2,\n        users: 150000,\n        url: 'https://raydium.io',\n        twitter: 'https://twitter.com/RaydiumProtocol',\n        github: 'https://github.com/raydium-io'\n      },\n      {\n        id: '2',\n        name: 'Marinade Finance',\n        category: 'Staking',\n        tvl: 890000000,\n        volume_24h: 25000000,\n        change_24h: 2.1,\n        users: 200000,\n        url: 'https://marinade.finance',\n        twitter: 'https://twitter.com/marinadefinance',\n        github: 'https://github.com/marinade-finance'\n      },\n      {\n        id: '3',\n        name: 'Serum',\n        category: 'DEX',\n        tvl: 320000000,\n        volume_24h: 85000000,\n        change_24h: -1.3,\n        users: 120000,\n        url: 'https://projectserum.com',\n        twitter: 'https://twitter.com/projectserum',\n        github: 'https://github.com/project-serum'\n      },\n      {\n        id: '4',\n        name: 'Jupiter',\n        category: 'Aggregator',\n        tvl: 150000000,\n        volume_24h: 250000000,\n        change_24h: 8.7,\n        users: 300000,\n        url: 'https://jup.ag',\n        twitter: 'https://twitter.com/jup_aggregator',\n        github: 'https://github.com/jup-ag'\n      },\n      {\n        id: '5',\n        name: 'Solana Name Service',\n        category: 'DNS',\n        tvl: 85000000,\n        volume_24h: 5000000,\n        change_24h: 1.5,\n        users: 500000,\n        url: 'https://solana.com',\n        twitter: 'https://twitter.com/solananameservice',\n        github: 'https://github.com/solana-labs'\n      }\n    ];\n  }\n\n  /**\n   * 获取 NFT 市场指标\n   */\n  async getNftMarketMetrics(): Promise<NftMarketMetrics> {\n    // 直接返回测试数据\n    return {\n      total_collections: 12500,\n      total_volume_24h: 45000000,\n      average_floor_price: 0.85,\n      top_collections: this.getTopNftCollections()\n    };\n  }\n\n  /**\n   * 获取顶级 NFT 集合\n   */\n  private getTopNftCollections(): NftCollection[] {\n    return [\n      {\n        id: '1',\n        name: 'Degenerate Ape Academy',\n        category: 'Avatar',\n        floor_price: 18.5,\n        volume_24h: 12000000,\n        volume_7d: 55000000,\n        change_24h: 3.2,\n        holders: 8500,\n        url: 'https://degenerateape.academy',\n        twitter: 'https://twitter.com/DegenApeAcademy'\n      },\n      {\n        id: '2',\n        name: 'Solana Monkey Business',\n        category: 'Avatar',\n        floor_price: 22.0,\n        volume_24h: 9500000,\n        volume_7d: 42000000,\n        change_24h: -1.5,\n        holders: 7200,\n        url: 'https://solanamonkey.business',\n        twitter: 'https://twitter.com/SolanaMonkeys'\n      },\n      {\n        id: '3',\n        name: 'Okay Bears',\n        category: 'Avatar',\n        floor_price: 15.2,\n        volume_24h: 7800000,\n        volume_7d: 35000000,\n        change_24h: 2.8,\n        holders: 9100,\n        url: 'https://okaybears.com',\n        twitter: 'https://twitter.com/OkayBearsNFT'\n      },\n      {\n        id: '4',\n        name: 'Mad Lads',\n        category: 'Avatar',\n        floor_price: 8.7,\n        volume_24h: 5200000,\n        volume_7d: 22000000,\n        change_24h: 1.2,\n        holders: 12000,\n        url: 'https://madlads.io',\n        twitter: 'https://twitter.com/MadLadsNFT'\n      },\n      {\n        id: '5',\n        name: 'Goblins',\n        category: 'Avatar',\n        floor_price: 4.5,\n        volume_24h: 3100000,\n        volume_7d: 14000000,\n        change_24h: -0.8,\n        holders: 15000,\n        url: 'https://goblins.io',\n        twitter: 'https://twitter.com/GoblinsNFT'\n      }\n    ];\n  }\n\n  /**\n   * 获取NFT市场趋势数据\n   */\n  async getNftTrendData(days: number = 7): Promise<NftTrendData[]> {\n    // 生成并返回测试数据\n    return this.generateTestNftTrendData(days);\n  }\n\n  /**\n   * 生成NFT趋势测试数据\n   */\n  private generateTestNftTrendData(days: number): NftTrendData[] {\n    const data: NftTrendData[] = [];\n    const today = new Date();\n\n    // 基础值\n    let baseVolume = 30000000;\n    let baseFloorPrice = 0.7;\n\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(today);\n      date.setDate(date.getDate() - i);\n\n      const dateStr = `${date.getMonth() + 1}月${date.getDate()}日`;\n\n      // 生成有波动的数据\n      const volumeVariation = Math.random() * 20000000 - 10000000;\n      const floorPriceVariation = (Math.random() * 0.3 - 0.15);\n\n      data.push({\n        date: dateStr,\n        volume: Math.max(0, baseVolume + volumeVariation),\n        floor_price: Math.max(0, baseFloorPrice + floorPriceVariation)\n      });\n\n      // 更新基础值，模拟趋势\n      baseVolume += volumeVariation * 0.3;\n      baseFloorPrice += floorPriceVariation * 0.2;\n    }\n\n    return data;\n  }\n}\n\nexport const localDbService = new LocalDbService();\nexport default localDbService;\n"],"names":["LocalDbService","limit","days","plans","p","type","data","today","i","date","dateStr","baseVolume","baseFloorPrice","volumeVariation","floorPriceVariation","localDbService"],"mappings":"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"}