{"version":3,"file":"SubscriptionPlansView-B_RZhlOJ.js","sources":["../../src/frontend/src/services/api/subscription.service.ts","../../src/frontend/src/stores/subscription.store.ts","../../src/frontend/src/views/subscription/SubscriptionPlansView.vue"],"sourcesContent":["import apiService from './api.service';\n\ninterface SubscriptionPlan {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  currency: string;\n  billing_cycle: string;\n  features: string[];\n  api_rate_limit: number;\n  signal_limit: number;\n}\n\ninterface Subscription {\n  id: string;\n  user_id: string;\n  plan_id: string;\n  plan: SubscriptionPlan;\n  status: string;\n  start_date: string;\n  end_date: string;\n  auto_renew: boolean;\n  current_usage: {\n    api_calls: number;\n    signals_generated: number;\n  };\n}\n\ninterface CreateSubscriptionData {\n  plan_id: string;\n  payment_method_id?: string;\n  auto_renew?: boolean;\n}\n\ninterface UpdateSubscriptionData {\n  plan_id?: string;\n  auto_renew?: boolean;\n}\n\nclass SubscriptionService {\n  /**\n   * 获取所有订阅计划\n   * @returns 订阅计划列表\n   */\n  async getSubscriptionPlans(): Promise<SubscriptionPlan[]> {\n    return apiService.get<SubscriptionPlan[]>('/commerce/subscriptions/plans');\n  }\n\n  /**\n   * 获取用户的订阅\n   * @returns 用户订阅列表\n   */\n  async getUserSubscriptions(): Promise<Subscription[]> {\n    return apiService.get<Subscription[]>('/commerce/subscriptions');\n  }\n\n  /**\n   * 获取当前活跃订阅\n   * @returns 当前订阅\n   */\n  async getCurrentSubscription(): Promise<Subscription | null> {\n    try {\n      const subscriptions = await this.getUserSubscriptions();\n      return subscriptions.find(sub => sub.status === 'active') || null;\n    } catch (error) {\n      console.error('获取当前订阅失败:', error);\n      return null;\n    }\n  }\n\n  /**\n   * 创建新订阅\n   * @param data 订阅数据\n   * @returns 创建的订阅\n   */\n  async createSubscription(data: CreateSubscriptionData): Promise<Subscription> {\n    return apiService.post<Subscription>('/commerce/subscriptions', data);\n  }\n\n  /**\n   * 更新订阅\n   * @param subscriptionId 订阅ID\n   * @param data 更新数据\n   * @returns 更新后的订阅\n   */\n  async updateSubscription(subscriptionId: string, data: UpdateSubscriptionData): Promise<Subscription> {\n    return apiService.put<Subscription>(`/commerce/subscriptions/${subscriptionId}`, data);\n  }\n\n  /**\n   * 取消订阅\n   * @param subscriptionId 订阅ID\n   * @returns 取消结果\n   */\n  async cancelSubscription(subscriptionId: string): Promise<{ message: string }> {\n    return apiService.delete<{ message: string }>(`/commerce/subscriptions/${subscriptionId}`);\n  }\n\n  /**\n   * 获取订阅使用统计\n   * @param subscriptionId 订阅ID\n   * @returns 使用统计\n   */\n  async getSubscriptionUsage(subscriptionId: string): Promise<{\n    api_calls: number;\n    signals_generated: number;\n    api_rate_limit: number;\n    signal_limit: number;\n    usage_percentage: {\n      api: number;\n      signals: number;\n    };\n  }> {\n    return apiService.get<{\n      api_calls: number;\n      signals_generated: number;\n      api_rate_limit: number;\n      signal_limit: number;\n      usage_percentage: {\n        api: number;\n        signals: number;\n      };\n    }>(`/commerce/subscriptions/${subscriptionId}/usage`);\n  }\n}\n\nexport const subscriptionService = new SubscriptionService();\nexport default subscriptionService;\nexport type { SubscriptionPlan, Subscription, CreateSubscriptionData, UpdateSubscriptionData };\n","import { defineStore } from 'pinia';\nimport { subscriptionService, SubscriptionPlan, Subscription, CreateSubscriptionData, UpdateSubscriptionData } from '../services/api/subscription.service';\n\nexport const useSubscriptionStore = defineStore('subscription', {\n  state: () => ({\n    plans: [] as SubscriptionPlan[],\n    subscriptions: [] as Subscription[],\n    currentSubscription: null as Subscription | null,\n    loading: false,\n    error: null as string | null,\n  }),\n\n  getters: {\n    subscriptionPlans: (state) => state.plans,\n    userSubscriptions: (state) => state.subscriptions,\n    activeSubscription: (state) => state.currentSubscription,\n    isLoading: (state) => state.loading,\n    hasError: (state) => !!state.error,\n    errorMessage: (state) => state.error,\n    hasActiveSubscription: (state) => !!state.currentSubscription && state.currentSubscription.status === 'active',\n  },\n\n  actions: {\n    /**\n     * 获取订阅计划\n     */\n    async fetchSubscriptionPlans() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        this.plans = await subscriptionService.getSubscriptionPlans();\n        return this.plans;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '获取订阅计划失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 获取用户订阅\n     */\n    async fetchUserSubscriptions() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        this.subscriptions = await subscriptionService.getUserSubscriptions();\n        this.currentSubscription = this.subscriptions.find(sub => sub.status === 'active') || null;\n        return this.subscriptions;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '获取用户订阅失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 获取当前订阅\n     */\n    async fetchCurrentSubscription() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        this.currentSubscription = await subscriptionService.getCurrentSubscription();\n        return this.currentSubscription;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '获取当前订阅失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 创建新订阅\n     */\n    async createSubscription(data: CreateSubscriptionData) {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        const subscription = await subscriptionService.createSubscription(data);\n        this.subscriptions.push(subscription);\n        this.currentSubscription = subscription;\n        return subscription;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '创建订阅失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 更新订阅\n     */\n    async updateSubscription(subscriptionId: string, data: UpdateSubscriptionData) {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        const updatedSubscription = await subscriptionService.updateSubscription(subscriptionId, data);\n        const index = this.subscriptions.findIndex(sub => sub.id === subscriptionId);\n        if (index !== -1) {\n          this.subscriptions[index] = updatedSubscription;\n          if (updatedSubscription.status === 'active') {\n            this.currentSubscription = updatedSubscription;\n          }\n        }\n        return updatedSubscription;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '更新订阅失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 取消订阅\n     */\n    async cancelSubscription(subscriptionId: string) {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        await subscriptionService.cancelSubscription(subscriptionId);\n        const index = this.subscriptions.findIndex(sub => sub.id === subscriptionId);\n        if (index !== -1) {\n          this.subscriptions[index].status = 'cancelled';\n          if (this.currentSubscription?.id === subscriptionId) {\n            this.currentSubscription = null;\n          }\n        }\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '取消订阅失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 获取订阅使用统计\n     */\n    async getSubscriptionUsage(subscriptionId: string) {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        const usage = await subscriptionService.getSubscriptionUsage(subscriptionId);\n        return usage;\n      } catch (error: any) {\n        this.error = error.response?.data?.detail || '获取订阅使用统计失败';\n        throw error;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    /**\n     * 清除错误信息\n     */\n    clearError() {\n      this.error = null;\n    },\n\n    /**\n     * 重置状态\n     */\n    reset() {\n      this.plans = [];\n      this.subscriptions = [];\n      this.currentSubscription = null;\n      this.error = null;\n    },\n  },\n});\n","<template>\n  <div class=\"container mx-auto px-4 py-8\">\n    <div class=\"mb-8\">\n      <h1 class=\"text-2xl font-bold text-primary dark:text-white\">TrendMatrix</h1>\n      <p class=\"mt-2 text-gray-600 dark:text-gray-400\">选择适合您需求的订阅计划</p>\n    </div>\n\n    <!-- 错误提示 -->\n    <div v-if=\"subscriptionStore.error\" class=\"mb-6 p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md\">\n      {{ subscriptionStore.error }}\n    </div>\n\n    <!-- 加载状态 -->\n    <div v-if=\"subscriptionStore.loading\" class=\"flex justify-center items-center py-16\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n    </div>\n\n    <!-- 订阅计划卡片 -->\n    <div v-else class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n      <div \n        v-for=\"plan in subscriptionStore.subscriptionPlans\" \n        :key=\"plan.id\"\n        class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\"\n      >\n        <div class=\"p-6\">\n          <div class=\"text-center mb-6\">\n            <h3 class=\"text-xl font-bold text-gray-900 dark:text-white\">{{ plan.name }}</h3>\n            <p class=\"mt-2 text-gray-600 dark:text-gray-400\">{{ plan.description }}</p>\n            <div class=\"mt-4\">\n              <span class=\"text-3xl font-bold text-gray-900 dark:text-white\">{{ plan.price }}</span>\n              <span class=\"text-gray-600 dark:text-gray-400\">{{ plan.currency }}/{{ plan.billing_cycle }}</span>\n            </div>\n          </div>\n\n          <div class=\"mb-6\">\n            <h4 class=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">包含功能</h4>\n            <ul class=\"space-y-2\">\n              <li v-for=\"(feature, index) in plan.features\" :key=\"index\" class=\"flex items-start\">\n                <svg class=\"h-5 w-5 text-green-500 mr-2 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"></path>\n                </svg>\n                <span class=\"text-gray-600 dark:text-gray-400\">{{ feature }}</span>\n              </li>\n            </ul>\n          </div>\n\n          <div class=\"mb-6\">\n            <h4 class=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">使用限制</h4>\n            <div class=\"space-y-2\">\n              <div class=\"flex justify-between items-center\">\n                <span class=\"text-gray-600 dark:text-gray-400\">API 调用限制</span>\n                <span class=\"font-medium text-gray-900 dark:text-white\">{{ plan.api_rate_limit }} 次/分钟</span>\n              </div>\n              <div class=\"flex justify-between items-center\">\n                <span class=\"text-gray-600 dark:text-gray-400\">信号生成限制</span>\n                <span class=\"font-medium text-gray-900 dark:text-white\">{{ plan.signal_limit }} 个/月</span>\n              </div>\n            </div>\n          </div>\n\n          <button \n            @click=\"selectPlan(plan)\"\n            :disabled=\"subscriptionStore.loading\"\n            class=\"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            选择计划\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 选择计划弹窗 -->\n    <div v-if=\"selectedPlan\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6\">\n        <div class=\"text-center mb-6\">\n          <h3 class=\"text-xl font-bold text-gray-900 dark:text-white\">确认订阅</h3>\n          <p class=\"mt-2 text-gray-600 dark:text-gray-400\">您选择了 {{ selectedPlan.name }} 计划</p>\n          <div class=\"mt-4\">\n            <span class=\"text-2xl font-bold text-gray-900 dark:text-white\">{{ selectedPlan.price }}</span>\n            <span class=\"text-gray-600 dark:text-gray-400\">{{ selectedPlan.currency }}/{{ selectedPlan.billing_cycle }}</span>\n          </div>\n        </div>\n\n        <div class=\"mb-6\">\n          <h4 class=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">支付方式</h4>\n          <div v-if=\"paymentStore.userPaymentMethods.length > 0\">\n            <div \n              v-for=\"method in paymentStore.userPaymentMethods\" \n              :key=\"method.id\"\n              class=\"flex items-center p-3 border border-gray-200 dark:border-gray-700 rounded-md mb-2 cursor-pointer\"\n              :class=\"{ 'border-blue-500 bg-blue-50 dark:bg-blue-900/30': selectedPaymentMethodId === method.id }\"\n              @click=\"selectedPaymentMethodId = method.id\"\n            >\n              <div class=\"flex items-center\">\n                <input \n                  type=\"radio\" \n                  :id=\"`payment-${method.id}`\"\n                  :name=\"'payment-method'\"\n                  :checked=\"selectedPaymentMethodId === method.id\"\n                  @change=\"selectedPaymentMethodId = method.id\"\n                  class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                >\n                <label \n                  :for=\"`payment-${method.id}`\"\n                  class=\"ml-2 block text-sm text-gray-900 dark:text-gray-300\"\n                >\n                  {{ method.type === 'credit_card' ? `${method.brand} ****${method.last_four}` : method.type }}\n                </label>\n              </div>\n              <div v-if=\"method.is_default\" class=\"ml-auto\">\n                <span class=\"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded\">默认</span>\n              </div>\n            </div>\n          </div>\n          <div v-else class=\"text-center py-4\">\n            <p class=\"text-gray-600 dark:text-gray-400 mb-4\">您还没有添加支付方式</p>\n            <router-link \n              to=\"/payment/methods\"\n              class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              添加支付方式\n            </router-link>\n          </div>\n        </div>\n\n        <div class=\"flex items-center mb-6\">\n          <input \n            type=\"checkbox\" \n            id=\"auto-renew\"\n            v-model=\"autoRenew\"\n            class=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n          >\n          <label for=\"auto-renew\" class=\"ml-2 block text-sm text-gray-900 dark:text-gray-300\">\n            自动续费\n          </label>\n        </div>\n\n        <div class=\"flex space-x-4\">\n          <button \n            @click=\"selectedPlan = null\"\n            class=\"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            取消\n          </button>\n          <button \n            @click=\"confirmSubscription\"\n            :disabled=\"subscriptionStore.loading || !selectedPaymentMethodId\"\n            class=\"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <span v-if=\"subscriptionStore.loading\" class=\"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full\"></span>\n            {{ subscriptionStore.loading ? '处理中...' : '确认订阅' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useSubscriptionStore } from '../../stores/subscription.store';\nimport { usePaymentStore } from '../../stores/payment.store';\nimport { SubscriptionPlan } from '../../services/api/subscription.service';\n\nconst router = useRouter();\nconst subscriptionStore = useSubscriptionStore();\nconst paymentStore = usePaymentStore();\n\nconst selectedPlan = ref<SubscriptionPlan | null>(null);\nconst selectedPaymentMethodId = ref<string>('');\nconst autoRenew = ref(true);\n\n// 加载订阅计划和支付方式\nonMounted(async () => {\n  await subscriptionStore.fetchSubscriptionPlans();\n  await paymentStore.fetchPaymentMethods();\n  \n  // 设置默认支付方式\n  if (paymentStore.defaultPaymentMethod) {\n    selectedPaymentMethodId.value = paymentStore.defaultPaymentMethod.id;\n  }\n});\n\n// 选择计划\nconst selectPlan = (plan: SubscriptionPlan) => {\n  selectedPlan.value = plan;\n};\n\n// 确认订阅\nconst confirmSubscription = async () => {\n  if (!selectedPlan.value || !selectedPaymentMethodId.value) {\n    return;\n  }\n\n  try {\n    await subscriptionStore.createSubscription({\n      plan_id: selectedPlan.value.id,\n      payment_method_id: selectedPaymentMethodId.value,\n      auto_renew: autoRenew.value\n    });\n    \n    // 订阅成功后跳转到我的订阅页面\n    router.push('/subscription/my');\n  } catch (error) {\n    console.error('订阅失败:', error);\n  }\n};\n</script>\n\n<style scoped>\n/* 组件特定样式 */\n</style>"],"names":["SubscriptionService","apiService","sub","error","data","subscriptionId","subscriptionService","useSubscriptionStore","defineStore","state","_b","_a","subscription","updatedSubscription","index","_c","router","useRouter","subscriptionStore","paymentStore","usePaymentStore","selectedPlan","ref","selectedPaymentMethodId","autoRenew","onMounted","selectPlan","plan","confirmSubscription","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_unref","_hoisted_2","_toDisplayString","_hoisted_3","_cache","_hoisted_4","_Fragment","_renderList","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","feature","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","$event","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","method","_hoisted_32","_hoisted_34","_hoisted_35","_hoisted_36","_createVNode","_component_router_link","_hoisted_37","_hoisted_38","_hoisted_40"],"mappings":"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"}