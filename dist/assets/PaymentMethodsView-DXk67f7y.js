import{d as j,o as U,c as o,b as t,u as l,t as b,k as i,a as f,F as v,r as q,s as D,l as u,x as z,y,v as B,i as k,f as m,h as d,n as $,_ as S}from"./index-C-TcrSO1.js";import{u as T}from"./payment.store-DtsOKpvG.js";import"./api.service-BvZdgALs.js";const H={class:"container mx-auto px-4 py-8"},N={key:0,class:"mb-6 p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-md"},F={key:1,class:"mb-6 p-4 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-md"},L={key:2,class:"flex justify-center items-center py-16"},A={key:3,class:"mb-8"},E={class:"flex justify-between items-center mb-6"},I={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center"},G={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},J={class:"p-6"},K={class:"flex items-center justify-between mb-4"},O={class:"flex items-center"},Q={class:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-4"},R={key:0,class:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W={key:1,class:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},X={key:2,class:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y={key:3,class:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Z={class:"font-medium text-gray-900 dark:text-white"},ee={class:"text-sm text-gray-600 dark:text-gray-400"},te={key:0,class:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},re={class:"mt-4 space-y-2"},ae={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},oe={class:"text-sm text-gray-600 dark:text-gray-400"},de={class:"mt-6 flex space-x-3"},se=["onClick","disabled"],le=["onClick","disabled"],ne={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ue={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},ie={class:"flex justify-between items-center mb-6"},be={class:"mb-4"},ye={key:0,class:"space-y-4"},ce={class:"grid grid-cols-2 gap-4"},ge={key:1,class:"mb-4"},me={key:2,class:"mb-4"},pe={key:3,class:"space-y-4"},xe={class:"flex items-center mb-6"},fe={class:"flex space-x-4"},ve=["disabled"],ke={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"},we={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},he={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},_e={class:"flex space-x-4"},Me=["disabled"],Ce={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"},Ve=j({__name:"PaymentMethodsView",setup(Pe){const s=T(),g=m(!1),p=m(!1),c=m(null),x=m(""),a=m({type:"",provider:"",details:{number:"",expiry_month:void 0,expiry_year:void 0,cvc:"",email:"",wallet_address:"",bank_account:{account_number:"",routing_number:"",account_holder_name:""}},set_as_default:!1});U(async()=>{await s.fetchPaymentMethods()});const w=n=>n?new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}):"-",h=async()=>{if(a.value.type)try{a.value.provider=a.value.type==="credit_card"?"stripe":a.value.type==="paypal"?"paypal":a.value.type==="crypto"?"crypto":"bank",await s.addPaymentMethod(a.value),_(),g.value=!1,c.value="支付方式添加成功",setTimeout(()=>{c.value=null},3e3)}catch(n){console.error("添加支付方式失败:",n)}},_=()=>{a.value={type:"",provider:"",details:{number:"",expiry_month:void 0,expiry_year:void 0,cvc:"",email:"",wallet_address:"",bank_account:{account_number:"",routing_number:"",account_holder_name:""}},set_as_default:!1}},M=async n=>{try{await s.setDefaultPaymentMethod(n),c.value="默认支付方式设置成功",setTimeout(()=>{c.value=null},3e3)}catch(e){console.error("设置默认支付方式失败:",e)}},C=n=>{x.value=n,p.value=!0},V=async()=>{if(x.value)try{await s.deletePaymentMethod(x.value),p.value=!1,c.value="支付方式删除成功",setTimeout(()=>{c.value=null},3e3)}catch(n){console.error("删除支付方式失败:",n)}};return(n,e)=>(d(),o(v,null,[t("div",H,[e[23]||(e[23]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"支付方式"),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"管理您的支付方式")],-1)),l(s).error?(d(),o("div",N,b(l(s).error),1)):i("",!0),c.value?(d(),o("div",F,b(c.value),1)):i("",!0),l(s).loading?(d(),o("div",L,[...e[16]||(e[16]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"},null,-1)])])):(d(),o("div",A,[t("div",E,[e[17]||(e[17]=t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"已添加的支付方式",-1)),t("button",{onClick:e[0]||(e[0]=r=>g.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 添加支付方式 ")]),l(s).hasPaymentMethods?(d(),o("div",G,[(d(!0),o(v,null,q(l(s).userPaymentMethods,r=>(d(),o("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700"},[t("div",J,[t("div",K,[t("div",O,[t("div",Q,[r.type==="credit_card"?(d(),o("svg",R,[...e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])):r.type==="paypal"?(d(),o("svg",W,[...e[20]||(e[20]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},null,-1)])])):r.type==="crypto"?(d(),o("svg",X,[...e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(d(),o("svg",Y,[...e[22]||(e[22]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])]))]),t("div",null,[t("h3",Z,b(r.type==="credit_card"?`${r.brand} 卡`:r.type==="paypal"?"PayPal":r.type==="crypto"?"加密货币":"银行转账"),1),t("p",ee,b(r.type==="credit_card"?`**** ${r.last_four}`:r.type==="paypal"||r.type==="crypto"?r.last_four:"银行账户"),1)])]),r.is_default?(d(),o("div",te," 默认 ")):i("",!0)]),t("div",re,[r.type==="credit_card"&&r.expiry_date?(d(),o("div",ae," 到期日期: "+b(r.expiry_date),1)):i("",!0),t("div",oe," 添加时间: "+b(w(r.created_at)),1),t("div",{class:$(["text-sm",r.status==="active"?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"])}," 状态: "+b(r.status==="active"?"活跃":"已禁用"),3)]),t("div",de,[r.is_default?i("",!0):(d(),o("button",{key:0,onClick:P=>M(r.id),disabled:l(s).loading,class:"flex-1 py-1.5 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-xs font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," 设置为默认 ",8,se)),t("button",{onClick:P=>C(r.id),disabled:l(s).loading,class:"py-1.5 px-3 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-xs font-medium text-red-700 dark:text-red-300 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"}," 删除 ",8,le)])])]))),128))])):(d(),o("div",I,[e[18]||(e[18]=f('<div class="mb-6" data-v-61917211><svg class="h-16 w-16 text-gray-400 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-61917211><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7" data-v-61917211></path></svg></div><h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2" data-v-61917211>您还没有添加支付方式</h3><p class="text-gray-600 dark:text-gray-400 mb-6" data-v-61917211>添加支付方式以便于订阅和支付</p>',3)),t("button",{onClick:e[1]||(e[1]=r=>g.value=!0),class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 添加支付方式 ")]))]))]),g.value?(d(),o("div",ne,[t("div",ue,[t("div",ie,[e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"添加支付方式",-1)),t("button",{onClick:e[2]||(e[2]=r=>g.value=!1),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},[...e[24]||(e[24]=[t("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:D(h,["prevent"])},[t("div",be,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"支付方式类型",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.type=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},[...e[26]||(e[26]=[f('<option value="" data-v-61917211>选择类型</option><option value="credit_card" data-v-61917211>信用卡/借记卡</option><option value="paypal" data-v-61917211>PayPal</option><option value="crypto" data-v-61917211>加密货币</option><option value="bank_transfer" data-v-61917211>银行转账</option>',5)])],512),[[z,a.value.type]])]),a.value.type==="credit_card"?(d(),o("div",ye,[t("div",null,[e[28]||(e[28]=t("label",{for:"card-number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"卡号",-1)),u(t("input",{type:"text",id:"card-number","onUpdate:modelValue":e[4]||(e[4]=r=>a.value.details.number=r),placeholder:"请输入卡号",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.number]])]),t("div",null,[e[29]||(e[29]=t("label",{for:"card-expiry",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"到期日期",-1)),t("div",ce,[u(t("input",{type:"number",id:"expiry-month","onUpdate:modelValue":e[5]||(e[5]=r=>a.value.details.expiry_month=r),placeholder:"月",min:"1",max:"12",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.expiry_month]]),u(t("input",{type:"number",id:"expiry-year","onUpdate:modelValue":e[6]||(e[6]=r=>a.value.details.expiry_year=r),placeholder:"年",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.expiry_year]])])]),t("div",null,[e[30]||(e[30]=t("label",{for:"card-cvc",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"CVC",-1)),u(t("input",{type:"text",id:"card-cvc","onUpdate:modelValue":e[7]||(e[7]=r=>a.value.details.cvc=r),placeholder:"请输入CVC",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.cvc]])])])):a.value.type==="paypal"?(d(),o("div",ge,[e[31]||(e[31]=t("label",{for:"paypal-email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"PayPal 邮箱",-1)),u(t("input",{type:"email",id:"paypal-email","onUpdate:modelValue":e[8]||(e[8]=r=>a.value.details.email=r),placeholder:"请输入PayPal邮箱",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.email]])])):a.value.type==="crypto"?(d(),o("div",me,[e[32]||(e[32]=t("label",{for:"crypto-address",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"钱包地址",-1)),u(t("input",{type:"text",id:"crypto-address","onUpdate:modelValue":e[9]||(e[9]=r=>a.value.details.wallet_address=r),placeholder:"请输入钱包地址",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.wallet_address]])])):a.value.type==="bank_transfer"?(d(),o("div",pe,[t("div",null,[e[33]||(e[33]=t("label",{for:"account-holder",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"账户持有人姓名",-1)),u(t("input",{type:"text",id:"account-holder","onUpdate:modelValue":e[10]||(e[10]=r=>a.value.details.bank_account.account_holder_name=r),placeholder:"请输入账户持有人姓名",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.bank_account.account_holder_name]])]),t("div",null,[e[34]||(e[34]=t("label",{for:"account-number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"账号",-1)),u(t("input",{type:"text",id:"account-number","onUpdate:modelValue":e[11]||(e[11]=r=>a.value.details.bank_account.account_number=r),placeholder:"请输入账号",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.bank_account.account_number]])]),t("div",null,[e[35]||(e[35]=t("label",{for:"routing-number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," routing number",-1)),u(t("input",{type:"text",id:"routing-number","onUpdate:modelValue":e[12]||(e[12]=r=>a.value.details.bank_account.routing_number=r),placeholder:"请输入routing number",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:""},null,512),[[y,a.value.details.bank_account.routing_number]])])])):i("",!0),t("div",xe,[u(t("input",{type:"checkbox",id:"set-as-default","onUpdate:modelValue":e[13]||(e[13]=r=>a.value.set_as_default=r),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[B,a.value.set_as_default]]),e[36]||(e[36]=t("label",{for:"set-as-default",class:"ml-2 block text-sm text-gray-900 dark:text-gray-300"}," 设置为默认支付方式 ",-1))]),t("div",fe,[t("button",{type:"button",onClick:e[14]||(e[14]=r=>g.value=!1),class:"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 取消 "),t("button",{type:"submit",disabled:l(s).loading||!a.value.type,class:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[l(s).loading?(d(),o("span",ke)):i("",!0),k(" "+b(l(s).loading?"添加中...":"添加支付方式"),1)],8,ve)])],32)])])):i("",!0),p.value?(d(),o("div",we,[t("div",he,[e[37]||(e[37]=t("div",{class:"text-center mb-6"},[t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"确认删除"),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"您确定要删除这个支付方式吗？")],-1)),t("div",_e,[t("button",{onClick:e[15]||(e[15]=r=>p.value=!1),class:"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," 取消 "),t("button",{onClick:V,disabled:l(s).loading,class:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[l(s).loading?(d(),o("span",Ce)):i("",!0),k(" "+b(l(s).loading?"删除中...":"删除"),1)],8,Me)])])])):i("",!0)],64))}}),De=S(Ve,[["__scopeId","data-v-61917211"]]);export{De as default};
//# sourceMappingURL=PaymentMethodsView-DXk67f7y.js.map
